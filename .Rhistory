library(readr)
NYC_HIGHSCHOOLS <- read_csv("datasets/NYC_HIGHSCHOOLS.csv")
View(NYC_HIGHSCHOOLS)
library(readr)
NYC_SATSCORES <- read_csv("datasets/NYC_SATSCORES.csv")
View(NYC_SATSCORES)
library(ggplot2)
library(tidyverse)
NYC_HIGHSCHOOLS <- NYC_HIGHSCHOOLS %>% select(dbn, location)
View(NYC_HIGHSCHOOLS)
NYC_SATSCORES <- NYC_SATSCORES %>% mutate(`Total Mean` = `Critical Reading Mean` + `Mathematics Mean` + `Writing Mean`)
View(NYC_SATSCORES)
NYC_SATSCORES <- NYC_SATSCORES %>% mutate(`Total Mean Score` = `Critical Reading Mean` + `Mathematics Mean` + `Writing Mean`)
NYC_SATSCORES <- NYC_SATSCORES %>% select(DBN,`School Name`,`Total Mean Score`)
NYC_SATSCORES <- NYC_SATSCORES %>% rename(dbn = DBN)
View(NYC_SATSCORES)
sub(".*NY", "", NYC_HIGHSCHOOLS$location)
sub(".*NY ", "", NYC_HIGHSCHOOLS$location)
substr(sub(".*NY ", "", NYC_HIGHSCHOOLS$location), start = 1, stop = 5)
NYC_HIGHSCHOOLS <- mutate(zipcode = substr(sub(".*NY ", "", NYC_HIGHSCHOOLS$location), start = 1, stop = 5))
NYC_HIGHSCHOOLS <- mutate(zipcode = substr(sub(".*NY ", "", NYC_HIGHSCHOOLS$location), start = 1, stop = 5)))
NYC_HIGHSCHOOLS <- mutate(zipcode = substr(sub(".*NY ", "", NYC_HIGHSCHOOLS$location), start = 1, stop = 5))
NYC_HIGHSCHOOLS$location = substr(sub(".*NY ", "", NYC_HIGHSCHOOLS$location), start = 1, stop = 5)
View(NYC_HIGHSCHOOLS)
NYC_SATSCORES <- NYC_SATSCORES %>% rename(Zipcode = location)
NYC_HIGHSCHOOLS <- NYC_HIGHSCHOOLS %>% rename(Zipcode = location)
NYC_SAT_DATA <- inner_join(NYC_HIGHSCHOOLS,NYC_SATSCORES,by="dbn")
View(NYC_SAT_DATA)
by_zip <- NYC_SAT_DATA %>% group_by(Zipcode)
View(by_zip)
NYC_SAT_DATA %>% group_by(Zipcode) %>% summarise(n())
NYC_SAT_DATA %>% group_by(Zipcode) %>% summarise(mean_sat = mean(`Total Mean Score`,na.rm = TRUE))
by_zip <- NYC_SAT_DATA %>% group_by(Zipcode) %>% summarise(mean_sat = mean(`Total Mean Score`,na.rm = TRUE))
View(NYC_SAT_DATA)
ggplot(NYC_SAT_DATA, aes(x=Zipcode,y=`Total Mean Score`)) + geom_boxplot()
ggplot(NYC_SAT_DATA, aes(y=`Total Mean Score`)) + geom_boxplot()
ggplot(by_zip, aes(y=`Total Mean Score`)) + geom_boxplot()
ggplot(by_zip, aes(y=`mean_sat`)) + geom_boxplot()
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(y = mean_sat)) +
geom_boxplot()
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
ggplot(., aes(y = mean_sat))
is_outlier <- function(x) {
return(x < quantile(x, 0.25, na.rm = TRUE) - 1.5 * IQR(x) | x > quantile(x, 0.75, na.rm = TRUE) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
by_zip <- na.omit(by_zip)
View(by_zip)
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=Zipcode,y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=,y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
is_outlier <- function(x) {
return(x < quantile(x, 0.25) - 1.5 * IQR(x) | x > quantile(x, 0.75) + 1.5 * IQR(x))
}
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
+ theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat))
+ geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank())
ggplot(., aes(x=,y = mean_sat)) + geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3)
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
geom_jitter()
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
labs(title ="Average NYC SAT scores by Zipcode", y = "Mean SAT Score")
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
labs(title ="Average SAT scores by Zipcode (NYC)", y = "Mean SAT Score")
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(., aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
labs(title ="Average SAT score by school zipcode (NYC)", y = "Mean SAT Score")
by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
labs(title ="Average SAT score by school zipcode (NYC)", y = "Mean SAT Score")
# Create Bargraph
p2 <- by_zip %>% ggplot(aes(x=Zipcode,y=mean_sat)) + geom_bar()
p2
# Create Bargraph
p2 <- by_zip %>% ggplot(aes(x=Zipcode,y=mean_sat)) + geom_bar(stat = identity))
# Create Bargraph
by_zip %>% ggplot(aes(x=Zipcode,y=mean_sat)) + geom_bar(stat = identity)
# Create Bargraph
by_zip %>% ggplot(aes(x=Zipcode,y=mean_sat)) + geom_bar(stat = "identity")
# Create Bargraph
by_zip %>% ggplot(aes(y=mean_sat)) + geom_bar(stat = "identity")
# Create Bargraph
by_zip %>% ggplot(aes(y=mean_sat)) + geom_bar(stat = "identity")
# Create Bargraph
by_zip %>% ggplot(aes(x=Zipcode,y=mean_sat)) + geom_bar(stat = "identity")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_bar(stat = "identity")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=.25, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=100, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=50, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=25, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=50, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=150, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=75, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=50, color="black", fill="white")
# Create Bargraph
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=75, color="black", fill="white")
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=75, color="black", fill="white") +
labs(title ="Average SAT score by school zipcode (NYC)", y = "Mean SAT Score")
by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=75, color="black", fill="white") +
labs(title ="Average SAT score by school zipcode (NYC)", x = "Mean SAT Score", y="Count")
View(NYC_SAT_DATA)
p1 <- by_zip %>% mutate(outlier = ifelse(is_outlier(mean_sat), Zipcode, as.numeric(NA))) %>%
ggplot(aes(x=factor(0),y = mean_sat)) +
geom_boxplot() + geom_text(aes(label = outlier), na.rm = TRUE, hjust = -0.3) +
theme(axis.title.x=element_blank(),
axis.text.x=element_blank(),
axis.ticks.x=element_blank()) +
labs(title ="Boxplot of mean SAT score by school zipcode (NYC)", y = "Mean SAT Score")
ggsave(filename="boxplot.pdf", plot=p1, path = "../output" )
ggsave(filename="histogram.pdf", plot=p2, path = "../output")
ggsave(filename="boxplot.pdf", plot=p1, path = "./output" )
ggsave(filename="histogram.pdf", plot=p2, path = "./output")
p2 <- by_zip %>% ggplot(aes(x=mean_sat)) + geom_histogram(binwidth=75, color="black", fill="white") +
labs(title ="Histogram of mean SAT score by school zipcode (NYC)", x = "Mean SAT Score", y="Count")
ggsave(filename="histogram.pdf", plot=p2, path = "./output")
